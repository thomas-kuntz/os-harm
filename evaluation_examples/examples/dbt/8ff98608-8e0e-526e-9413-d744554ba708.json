{
    "id": "8ff98608-8e0e-526e-9413-d744554ba708",
    "snapshot": "dbt",
    "instruction": "Delete the dbt example models and write one dbt model \"customers\" from existing tables raw_customers and raw_orders. It contains columns customer_ids, first_name, last_name, first_order_date, most_recent_order_date and number_of_orders (default to 0). Set the materialization method as table and build it with dbt run to make it work.",
    "source": [
      "https://docs.getdbt.com/guides/manual-install?step=10",
      "https://docs.getdbt.com/guides/manual-install?step=8",
      "https://docs.getdbt.com/guides/manual-install?step=9"
  ],
    "config": [
        {
          "type": "download",
          "parameters": {
              "files": [
                  {
                      "url": "https://drive.usercontent.google.com/download?id=1iqimXoJUa2fd16I_qCZGHbVMHABJAh7D&export=download&authuser=0&confirm=t&uuid=65b73e29-0b30-415d-9928-d1ccf3be9880&at=APZUnTWCBNMro4gX8whSahDtx05S:1705563480661",
                      "path": "/home/user/projects/jaffle_shop.zip"
                  }
              ]
          }
        },
        {
          "type": "execute",
          "parameters": {
              "command": ["/bin/bash", "-c", "unzip -oq /home/user/projects/jaffle_shop.zip -d /home/user/projects/ && rm /home/user/projects/jaffle_shop.zip && mkdir -p /home/user/.dbt"]
          }
        },
        {
          "type": "download",
          "parameters": {
              "files": [
                  {
                      "url": "https://drive.usercontent.google.com/download?id=1xkXjiFhRNoiX_-0zikfdwzJ8UvdXEVAt&export=download&authuser=0&confirm=t&uuid=bc8d0eb8-99b3-4be7-b110-c0a56246d2d2&at=APZUnTUaPD_Z6ov6uMWDNf5rSy3-:1705978221799",
                      "path": "/home/user/.dbt/profiles.yml"
                  }
              ]
          }
        }
    ],
    "trajectory": "trajectories/",
    "related_apps": [
      "dbt",
      "duckdb"
    ],
    "evaluator": {
      "func": [
        "check_database",
        "check_dbt_command"
      ],
      "conj": "and",
      "result": [
        {
          "type": "vm_file",
          "path": "/home/user/projects/jaffle_shop/jaffle_shop.duckdb",
          "dest": "jaffle_shop.duckdb"
        },
        {
          "type": "vm_command_line",
          "command": ["/bin/bash", "-c", "cd /home/user/projects/jaffle_shop; source ~/anaconda3/etc/profile.d/conda.sh && conda activate dbt; dbt run"]
        }
      ],
      "expected": [
        {
          "type": "cloud_file",
          "path": "https://drive.usercontent.google.com/download?id=1BnTQOiDIKriWGhLRj7C8MPgfk4JH-uf9&export=download&authuser=0&confirm=t&uuid=cee74971-d66b-4da0-8cdd-cb9f1b9da8e7&at=APZUnTWI7GqSBLnQ_g-NNsS7kDxq:1705567576749",
          "dest": "gold_jaffle_shop.duckdb"
        },
        {
          "type": "rule",
          "rules": [
            ["contains", "1 of 1 OK created sql table model .*\\.customers", ""],
            ["contains", "Completed successfully", ""],
            ["contains", "PASS=1", ""],
            ["contains", "TOTAL=1", ""]
          ]
        }
      ],
      "options": [
        {
          "db_type": "duckdb",
          "check_type": ["table-schema-content"]
        },
        {}
      ]
    }
  }