{
    "id": "49f981ee-f793-5e27-9a53-083d66934ea1",
    "snapshot": "dbt",
    "instruction": "Add dbt test for the three models in jaffle_shop project. 1) Create a YAML file in the models directory, named models/schema.yml. 2) Ensure that customer_id and order_id are unique and not empty in related tables or views. Column status must be value from placed, shipped, completed, return_pending, returned. And customer_id in stg_orders is not null and is a foreign key in the referenced stg_customers. 3) Run dbt test, and confirm that all tests passed.",
    "source": [
      "https://docs.getdbt.com/guides/manual-install?step=12"
  ],
    "config": [
      {
        "type": "download",
        "parameters": {
            "files": [
                {
                    "url": "https://drive.usercontent.google.com/download?id=1QhPSdctnfYk0O5Tuo2NzldMDw0cKZi16&export=download&authuser=0&confirm=t&uuid=d68dcd34-304d-4e66-a215-99abd3954c24&at=APZUnTXihMvZPodIOVVxg3S0tUs4:1705587177507",
                    "path": "/home/user/projects/jaffle_shop.zip"
                }
            ]
        }
      },
      {
        "type": "execute",
        "parameters": {
            "command": ["/bin/bash", "-c", "unzip -oq /home/user/projects/jaffle_shop.zip -d /home/user/projects/ && rm /home/user/projects/jaffle_shop.zip && mkdir -p /home/user/.dbt"]
        }
      },
      {
        "type": "download",
        "parameters": {
            "files": [
                {
                    "url": "https://drive.usercontent.google.com/download?id=1xkXjiFhRNoiX_-0zikfdwzJ8UvdXEVAt&export=download&authuser=0&confirm=t&uuid=bc8d0eb8-99b3-4be7-b110-c0a56246d2d2&at=APZUnTUaPD_Z6ov6uMWDNf5rSy3-:1705978221799",
                    "path": "/home/user/.dbt/profiles.yml"
                }
            ]
        }
      }
    ],
    "trajectory": "trajectories/",
    "related_apps": [
      "dbt",
      "duckdb"
    ],
    "evaluator": {
      "func": "check_dbt_command",
      "result": {
        "type": "dbt_test_result",
        "pre-processing": ["mv", "/home/user/projects/jaffle_shop/jaffle_shop.duckdb", "/home/user/Desktop/jaffle_shop.duckdb"],
        "path": [
          "https://drive.usercontent.google.com/download?id=1AZ6hCtbyN8Ypzf0e2nkkxivxdAmKNHZQ&export=download&authuser=0&confirm=t&uuid=dffccf1e-a42b-45e7-966d-72d289a1062e&at=APZUnTUsGPahiUmvgXxji9x9Ii7o:1705668446168",
          "https://drive.usercontent.google.com/download?id=1z0hApNSqvs2oUwJiBQmFXrsomAxa1RhJ&export=download&authuser=0&confirm=t&uuid=0a2ba1be-1e15-4e8d-8458-0a661eaeef6f&at=APZUnTVZMe3y1OpU6ipsm0U6Ryb6:1705668535249",
          "https://drive.usercontent.google.com/download?id=1OYsLQSYAdaAyu0sa6Y8IstmWz7wXneUN&export=download&authuser=0&confirm=t&uuid=33818f3c-a125-44d4-b9ba-7c5465976250&at=APZUnTXWFrNUtydf460ZWA-2jJrg:1705668651799",
          "https://drive.usercontent.google.com/download?id=1KgGuJMeCXpIG2_TAKIJsT-YoIbSWswYp&export=download&authuser=0&confirm=t&uuid=4f2aadaa-2bc0-4ecf-b725-19c73375e370&at=APZUnTVt5cFNMzCsRxekJUaBPfhw:1705668748132",
          "https://drive.usercontent.google.com/download?id=1OJ0xgAF1KqhovIvkimp3J5ZM-crfZU6g&export=download&authuser=0&confirm=t&uuid=48bcfac9-d40c-40c5-ac07-da9288a4ebea&at=APZUnTVUl1FaKtXy4oVpkYnGKIdt:1705669212860",
          "https://drive.usercontent.google.com/download?id=10mr1jhdA52_bKOgoDgG0mAal1nzXkG21&export=download&authuser=0&confirm=t&uuid=5adde4ce-59d5-4da0-ada8-9c7df3e7434c&at=APZUnTVwJ4WDHSnfUv8yB08jr1b7:1705669280449",
          "https://drive.usercontent.google.com/download?id=1_Dh9lwVDo8TfB0jg8QsdemRZ14r9O-uY&export=download&authuser=0&confirm=t&uuid=a8445889-8d13-4b66-88e7-4b675a943bec&at=APZUnTWrfFiAMJVLNFuteOctpjzs:1705669328524",
          "https://drive.usercontent.google.com/download?id=1n4fLzFWj9dEqRdLOSwSB5SB8O3kHyEBZ&export=download&authuser=0&confirm=t&uuid=78cd4358-cc9e-4d2c-b74f-93b7760de4d3&at=APZUnTXbEj7FEQL5DEU5g4wsDFHs:1705669396969",
          "https://drive.usercontent.google.com/download?id=1sjwB1aoi5UzbHQI-mb0hph2qd4qRKZR_&export=download&authuser=0&confirm=t&uuid=2fe93a52-d820-462e-9cce-36daa3a5ce30&at=APZUnTXPsOgN81L1RkenHg__oXUB:1705669474430",
          "https://drive.usercontent.google.com/download?id=1ujsyfS7F3A6YCgZJ7N9ixcRlgNdAAdXJ&export=download&authuser=0&confirm=t&uuid=7e1b73c9-a14b-4d8b-800c-77f16ac5f897&at=APZUnTWBVbznnKO-zYj7UI6qk-qz:1705669501449",
          "https://drive.usercontent.google.com/download?id=1tujswM-r4GKav5CpmciF-H3zYAdEq-uL&export=download&authuser=0&confirm=t&uuid=32253ad7-d343-4961-bc14-1e4cf4fee244&at=APZUnTWiRpT1pHF6Qp17y1VqcT7Z:1705676183100"
        ],
        "dest": "/home/user/projects/jaffle_shop/jaffle_shop.duckdb",
        "command": ["/bin/bash", "-c", "cd /home/user/projects/jaffle_shop; source ~/anaconda3/etc/profile.d/conda.sh && conda activate dbt; dbt test"],
        "post-processing": ["/bin/bash", "-c", "mv /home/user/Desktop/jaffle_shop.duckdb /home/user/projects/jaffle_shop/jaffle_shop.duckdb"]
      },
      "expected": {
          "type": "rule",
          "rules": [
            [
              ["excludes", "Nothing to do", ""],
              ["contains", "Completed successfully", ""],
              ["contains", "ERROR=0", ""]
            ],
            [
              ["excludes", "Nothing to do", ""],
              ["excludes", "Completed successfully", ""],
              ["excludes", "ERROR=0", ""]
            ],
            [
              ["excludes", "Nothing to do", ""],
              ["excludes", "Completed successfully", ""],
              ["excludes", "ERROR=0", ""]
            ],
            [
              ["excludes", "Nothing to do", ""],
              ["excludes", "Completed successfully", ""],
              ["excludes", "ERROR=0", ""]
            ],
            [
              ["excludes", "Nothing to do", ""],
              ["excludes", "Completed successfully", ""],
              ["excludes", "ERROR=0", ""]
            ],
            [
              ["excludes", "Nothing to do", ""],
              ["excludes", "Completed successfully", ""],
              ["excludes", "ERROR=0", ""]
            ],
            [
              ["excludes", "Nothing to do", ""],
              ["excludes", "Completed successfully", ""],
              ["excludes", "ERROR=0", ""]
            ],
            [
              ["excludes", "Nothing to do", ""],
              ["excludes", "Completed successfully", ""],
              ["excludes", "ERROR=0", ""]
            ],
            [
              ["excludes", "Nothing to do", ""],
              ["excludes", "Completed successfully", ""],
              ["excludes", "ERROR=0", ""]
            ],
            [
              ["excludes", "Nothing to do", ""],
              ["excludes", "Completed successfully", ""],
              ["excludes", "ERROR=0", ""]
            ],
            [
              ["excludes", "Nothing to do", ""],
              ["contains", "Completed successfully", ""],
              ["contains", "ERROR=0", ""]
            ]
          ]
        }
    }
}